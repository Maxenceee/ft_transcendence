[1;32mBuilding and running the container...[0m
time="2024-03-29T13:55:48+01:00" level=warning msg="/home/ngennaro/ft_transcendence/docker-compose.yml: `version` is obsolete"
 Container nginx  Stopping
 Container nginx  Stopped
 Container nginx  Removing
 Container nginx  Removed
 Container django  Stopping
 Container django  Stopped
 Container django  Removing
 Container django  Removed
 Container postgres  Stopping
 Container postgres  Stopped
 Container postgres  Removing
 Container postgres  Removed
 Image nginx:latest  Removing
 Image ft_transcendence-website:latest  Removing
 Network transcendence  Removing
 Image nginx:latest  Removed
 Image ft_transcendence-website:latest  Removed
 Network transcendence  Removed
time="2024-03-29T13:56:01+01:00" level=warning msg="/home/ngennaro/ft_transcendence/docker-compose.yml: `version` is obsolete"
#0 building with "default" instance using docker driver

#1 [website internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.13kB done
#1 DONE 0.2s

#2 [website internal] load metadata for docker.io/library/python:3.10-slim
#2 DONE 1.0s

#3 [website internal] load .dockerignore
#3 transferring context: 94B done
#3 DONE 0.2s

#4 [website  1/17] FROM docker.io/library/python:3.10-slim@sha256:f80e619e067eebe47bc72f16da167888710a73235c35b14fdff85ee8245db476
#4 DONE 0.0s

#5 [website internal] load build context
#5 transferring context: 8.17kB 0.0s done
#5 DONE 0.2s

#6 [website  2/17] WORKDIR /app
#6 CACHED

#7 [website  7/17] WORKDIR /app/client
#7 CACHED

#8 [website 10/17] RUN pip install --upgrade pip
#8 CACHED

#9 [website  8/17] RUN npm install
#9 CACHED

#10 [website  9/17] WORKDIR /app
#10 CACHED

#11 [website 11/17] RUN pip install django==4.0.0 channels==3.0.4 psycopg2-binary python-dotenv passlib requests django-cors-headers Twisted[tls,http2] Pillow
#11 CACHED

#12 [website  3/17] RUN apt-get update && apt-get install -y curl
#12 CACHED

#13 [website  5/17] RUN apt-get install -y nodejs
#13 CACHED

#14 [website  4/17] RUN curl -fsSL https://deb.nodesource.com/setup_16.x | bash -
#14 CACHED

#15 [website  6/17] COPY ./client/package.json /app/client/package.json
#15 CACHED

#16 [website 12/17] COPY ./server /app/server
#16 CACHED

#17 [website 13/17] COPY .env /app/client/.env
#17 DONE 0.7s

#18 [website 14/17] COPY ./client /app/client
#18 DONE 1.1s

#19 [website 15/17] WORKDIR /app/client
#19 DONE 1.1s

#20 [website 16/17] RUN npm run pack
#20 2.004 
#20 2.004 > client@1.0.0 pack
#20 2.004 > dotenv -f /app/.env -- webpack --config webpack.config.js
#20 2.004 
#20 2.183 ================================ {
#20 2.183   npm_config_user_agent: 'npm/8.19.4 node/v16.20.2 linux x64 workspaces/false',
#20 2.183   npm_node_execpath: '/usr/bin/node',
#20 2.183   PYTHON_PIP_VERSION: '23.0.1',
#20 2.183   npm_config_noproxy: '',
#20 2.183   HOME: '/root',
#20 2.183   npm_package_json: '/app/client/package.json',
#20 2.183   GPG_KEY: 'A035C8C19219BA821ECEA86B64E628F8D684696D',
#20 2.183   npm_config_userconfig: '/root/.npmrc',
#20 2.183   npm_config_local_prefix: '/app/client',
#20 2.183   COLOR: '0',
#20 2.183   npm_config_metrics_registry: 'https://registry.npmjs.org/',
#20 2.183   npm_config_prefix: '/usr',
#20 2.183   PYTHON_GET_PIP_URL: 'https://github.com/pypa/get-pip/raw/dbf0c85f76fb6e1ab42aa672ffca6f0a675d9ee4/public/get-pip.py',
#20 2.183   npm_config_cache: '/root/.npm',
#20 2.183   npm_config_node_gyp: '/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js',
#20 2.183   PATH: '/app/client/node_modules/.bin:/app/node_modules/.bin:/node_modules/.bin:/usr/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin',
#20 2.183   NODE: '/usr/bin/node',
#20 2.183   npm_package_name: 'client',
#20 2.183   LANG: 'C.UTF-8',
#20 2.183   npm_lifecycle_script: 'dotenv -f /app/.env -- webpack --config webpack.config.js',
#20 2.183   npm_package_version: '1.0.0',
#20 2.183   npm_lifecycle_event: 'pack',
#20 2.183   PYTHON_VERSION: '3.10.14',
#20 2.183   PYTHON_SETUPTOOLS_VERSION: '65.5.1',
#20 2.183   npm_config_globalconfig: '/usr/etc/npmrc',
#20 2.183   npm_config_init_module: '/root/.npm-init.js',
#20 2.183   PWD: '/app/client',
#20 2.183   npm_execpath: '/usr/lib/node_modules/npm/bin/npm-cli.js',
#20 2.183   PYTHON_GET_PIP_SHA256: 'dfe9fd5c28dc98b5ac17979a953ea550cec37ae1b47a5116007395bfacff2ab9',
#20 2.183   npm_config_global_prefix: '/usr',
#20 2.183   npm_command: 'run-script',
#20 2.183   INIT_CWD: '/app/client',
#20 2.183   EDITOR: 'vi',
#20 2.183   BASE_URI: 'http://localhost:3000',
#20 2.183   POSTGRES_USER: 'transcendence',
#20 2.183   POSTGRES_PASSWORD: 'qwerty',
#20 2.183   INTRA_USER: 'u-s4t2ud-f5db00ee84d9f1b47815a3376f10198e4a56c2c3be8004261a13fd9c412c814c',
#20 2.183   INTRA_SECRET: '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',
#20 2.183   SWIVEL_USER: '4fMHysGNahEaKcmx8LaS',
#20 2.183   SWIVEL_SECRET: 'JLiM0gBoMpzcbazeiSiPVaAZuGeKXISXxBpbGqucdNJGlmy6XW'
#20 2.183 }
#20 4.781 webpack-fix-style-only-entries: removing js from style only module: styles.min.js
#20 4.783 (node:26) [DEP_WEBPACK_CHUNK_HAS_ENTRY_MODULE] DeprecationWarning: Chunk.hasEntryModule: Use new ChunkGraph API
#20 4.783 (Use `node --trace-deprecation ...` to show where the warning was created)
#20 4.783 (node:26) [DEP_WEBPACK_CHUNK_ENTRY_MODULE] DeprecationWarning: Chunk.entryModule: Use new ChunkGraph API
#20 4.783 (node:26) [DEP_WEBPACK_MODULE_INDEX] DeprecationWarning: Module.index: Use new ModuleGraph API
#20 8.368 asset app.min.js 587 KiB [emitted] [minimized] [big] (name: app)
#20 8.368 asset style.css 46.4 KiB [emitted] (name: styles)
#20 8.368 orphan modules 2.54 MiB (javascript) 937 bytes (runtime) [orphan] 47 modules
#20 8.368 runtime modules 221 bytes 1 module
#20 8.368 cacheable modules 1.38 MiB (javascript) 46.4 KiB (css/mini-extract)
#20 8.368   ./srcs/App.js + 40 modules 1.38 MiB [built] [code generated]
#20 8.368   ./srcs/styles/style.scss 50 bytes [built] [code generated]
#20 8.368   css ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./srcs/styles/style.scss 46.4 KiB [built] [code generated]
#20 8.368 
#20 8.368 WARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).
#20 8.368 This can impact web performance.
#20 8.368 Assets: 
#20 8.368   app.min.js (587 KiB)
#20 8.368 
#20 8.368 WARNING in entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance.
#20 8.368 Entrypoints:
#20 8.368   app (587 KiB)
#20 8.368       app.min.js
#20 8.368 
#20 8.368 WARNING in webpack performance recommendations: 
#20 8.368 You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.
#20 8.368 For more info visit https://webpack.js.org/guides/code-splitting/
#20 8.368 
#20 8.368 webpack 5.91.0 compiled with 3 warnings in 5739 ms
#20 DONE 9.0s

#21 [website 17/17] WORKDIR /app/server
#21 DONE 0.9s

#22 [website] exporting to image
#22 exporting layers
#22 exporting layers 3.6s done
#22 writing image sha256:295e82e05f84a846e343646486044120d23ab40f7bb7959e5897b17b0226907f 0.0s done
#22 naming to docker.io/library/ft_transcendence-website 0.1s done
#22 DONE 4.5s

#23 [nginx internal] load build definition from Dockerfile
#23 transferring dockerfile:
#23 transferring dockerfile: 526B done
#23 DONE 0.6s

#24 [nginx internal] load metadata for docker.io/library/debian:oldstable
#24 DONE 0.3s

#25 [nginx internal] load .dockerignore
#25 transferring context: 2B done
#25 DONE 0.2s

#26 [nginx 1/5] FROM docker.io/library/debian:oldstable@sha256:a240fff24d02cc88c398d13f9d8f558c95b52f5d6cd16c5115687699f5279700
#26 DONE 0.0s

#27 [nginx internal] load build context
#27 transferring context: 32B done
#27 DONE 0.2s

#28 [nginx 4/5] COPY ./nginx.conf /etc/nginx/nginx.conf
#28 CACHED

#29 [nginx 2/5] RUN apt update -y && apt upgrade -y
#29 CACHED

#30 [nginx 3/5] RUN apt install nginx curl -y
#30 CACHED

#31 [nginx 5/5] WORKDIR /etc/nginx/
#31 CACHED

#32 [nginx] exporting to image
#32 exporting layers done
#32 writing image sha256:dc46caca952fb711a18415199367e0de480ed7b29d6f1e0b2cb01170f523da49 0.0s done
#32 naming to docker.io/library/nginx 0.1s done
#32 DONE 0.2s
 Network transcendence  Creating
 Network transcendence  Created
 Container postgres  Creating
 Container postgres  Created
 Container django  Creating
 Container django  Created
 Container nginx  Creating
 Container nginx  Created
 Container postgres  Starting
 Container postgres  Started
 Container postgres  Waiting
 Container postgres  Healthy
 Container django  Starting
 Container django  Started
 Container nginx  Starting
 Container nginx  Started
[1;32mThe server is running on http://localhost:3000
No changes detected
Migrations for 'index':
  index/migrations/0001_initial.py
    - Create model Game_history
    - Create model User
    - Create model Token
No changes detected in app 'game'
Operations to perform:
  Apply all migrations: admin, auth, contenttypes, index, sessions
Running migrations:
  No migrations to apply.
Deleting 'app.min.js'
Deleting 'style.css'
Deleting 'robot/robots.txt'
Deleting 'fonts/Marianne-Regular.woff2'
Deleting 'fonts/Marianne-Light.woff2'
Deleting 'fonts/font.json'
Deleting 'fonts/Marianne-Medium.woff2'
Deleting 'fonts/Marianne-Thin.woff2'
Deleting 'javascripts/gameLocal.js'
Deleting 'javascripts/gameClassic.js'
Deleting 'javascripts/game2player.js'
Deleting 'javascripts/game4players.js'
Deleting 'javascripts/gameTournament.js'
Deleting 'javascripts/gameAI.js'
Deleting 'javascripts/main.58fr6fe.js'
Deleting 'javascripts/backup_deprecated/index.html'
Deleting 'javascripts/backup_deprecated/pong_visual.glb'
Deleting 'javascripts/backup_deprecated/gameWin.js'
Deleting 'javascripts/backup_deprecated/game_origine.js'
Deleting 'javascripts/backup_deprecated/gameError.js'
Deleting 'javascripts/backup_deprecated/game.js'
Deleting 'javascripts/backup_deprecated/pong_visual.obj'
Deleting 'javascripts/backup_deprecated/main.js'
Deleting 'javascripts/img/no.jpg'
Deleting 'images/pong_visual_3.png'
Deleting 'images/404_img.png'
Deleting 'images/pong_visual_4.png'
Deleting 'images/pong_visual_7.png'
Deleting 'images/pong_visual_5.png'
Deleting 'images/pong_visual_10.png'
Deleting 'images/pong_visual_1.png'
Deleting 'images/background_sky_box.jpg'
Deleting 'images/trascendence.png'
Deleting 'images/pong_visual_9.png'
Deleting 'images/pong_visual_6.png'
Deleting 'images/pong_visual_11.png'
Deleting 'images/favicon-32x32.png'
Deleting 'images/favicon-16x16.png'
Deleting 'images/favicon.ico'
Deleting 'images/42_logo_black-684989d43d629b3c0ff6fd7e1157ee04db9bb7a73fba8ec4e01543d650a1c607.png'
Deleting 'images/pong_visual_2.png'
Deleting 'images/pong_visual_8.png'
Deleting 'videos/0001-0151.mp4'
Deleting 'videos/0002-0150.mp4'
Deleting 'videos/0003-01500001-0150.mp4'
Deleting 'videos/0001-0150.mp4'
Deleting 'admin/fonts/LICENSE.txt'
Deleting 'admin/fonts/Roboto-Light-webfont.woff'
Deleting 'admin/fonts/Roboto-Bold-webfont.woff'
Deleting 'admin/fonts/Roboto-Regular-webfont.woff'
Deleting 'admin/fonts/README.txt'
Deleting 'admin/img/tooltag-arrowright.svg'
Deleting 'admin/img/icon-unknown-alt.svg'
Deleting 'admin/img/inline-delete.svg'
Deleting 'admin/img/sorting-icons.svg'
Deleting 'admin/img/icon-clock.svg'
Deleting 'admin/img/calendar-icons.svg'
Deleting 'admin/img/tooltag-add.svg'
Deleting 'admin/img/icon-calendar.svg'
Deleting 'admin/img/LICENSE'
Deleting 'admin/img/icon-no.svg'
Deleting 'admin/img/icon-deletelink.svg'
Deleting 'admin/img/icon-addlink.svg'
Deleting 'admin/img/icon-changelink.svg'
Deleting 'admin/img/icon-viewlink.svg'
Deleting 'admin/img/selector-icons.svg'
Deleting 'admin/img/search.svg'
Deleting 'admin/img/README.txt'
Deleting 'admin/img/icon-alert.svg'
Deleting 'admin/img/icon-unknown.svg'
Deleting 'admin/img/icon-yes.svg'
Deleting 'admin/img/gis/move_vertex_on.svg'
Deleting 'admin/img/gis/move_vertex_off.svg'
Deleting 'admin/css/rtl.css'
Deleting 'admin/css/dashboard.css'
Deleting 'admin/css/widgets.css'
Deleting 'admin/css/responsive_rtl.css'
Deleting 'admin/css/forms.css'
Deleting 'admin/css/changelists.css'
Deleting 'admin/css/nav_sidebar.css'
Deleting 'admin/css/base.css'
Deleting 'admin/css/autocomplete.css'
Deleting 'admin/css/fonts.css'
Deleting 'admin/css/responsive.css'
Deleting 'admin/css/login.css'
Deleting 'admin/css/vendor/select2/select2.css'
Deleting 'admin/css/vendor/select2/select2.min.css'
Deleting 'admin/css/vendor/select2/LICENSE-SELECT2.md'
Deleting 'admin/js/prepopulate_init.js'
Deleting 'admin/js/inlines.js'
Deleting 'admin/js/SelectFilter2.js'
Deleting 'admin/js/autocomplete.js'
Deleting 'admin/js/urlify.js'
Deleting 'admin/js/cancel.js'
Deleting 'admin/js/calendar.js'
Deleting 'admin/js/change_form.js'
Deleting 'admin/js/nav_sidebar.js'
Deleting 'admin/js/jquery.init.js'
Deleting 'admin/js/SelectBox.js'
Deleting 'admin/js/prepopulate.js'
Deleting 'admin/js/actions.js'
Deleting 'admin/js/collapse.js'
Deleting 'admin/js/popup_response.js'
Deleting 'admin/js/core.js'
Deleting 'admin/js/vendor/select2/select2.full.min.js'
Deleting 'admin/js/vendor/select2/select2.full.js'
Deleting 'admin/js/vendor/select2/LICENSE.md'
Deleting 'admin/js/vendor/select2/i18n/pt.js'
Deleting 'admin/js/vendor/select2/i18n/ar.js'
Deleting 'admin/js/vendor/select2/i18n/hy.js'
Deleting 'admin/js/vendor/select2/i18n/tk.js'
Deleting 'admin/js/vendor/select2/i18n/zh-TW.js'
Deleting 'admin/js/vendor/select2/i18n/sk.js'
Deleting 'admin/js/vendor/select2/i18n/gl.js'
Deleting 'admin/js/vendor/select2/i18n/sv.js'
Deleting 'admin/js/vendor/select2/i18n/is.js'
Deleting 'admin/js/vendor/select2/i18n/eu.js'
Deleting 'admin/js/vendor/select2/i18n/tr.js'
Deleting 'admin/js/vendor/select2/i18n/mk.js'
Deleting 'admin/js/vendor/select2/i18n/hi.js'
Deleting 'admin/js/vendor/select2/i18n/ne.js'
Deleting 'admin/js/vendor/select2/i18n/et.js'
Deleting 'admin/js/vendor/select2/i18n/ro.js'
Deleting 'admin/js/vendor/select2/i18n/dsb.js'
Deleting 'admin/js/vendor/select2/i18n/fr.js'
Deleting 'admin/js/vendor/select2/i18n/it.js'
Deleting 'admin/js/vendor/select2/i18n/bs.js'
Deleting 'admin/js/vendor/select2/i18n/hsb.js'
Deleting 'admin/js/vendor/select2/i18n/el.js'
Deleting 'admin/js/vendor/select2/i18n/ka.js'
Deleting 'admin/js/vendor/select2/i18n/vi.js'
Deleting 'admin/js/vendor/select2/i18n/ko.js'
Deleting 'admin/js/vendor/select2/i18n/ca.js'
Deleting 'admin/js/vendor/select2/i18n/de.js'
Deleting 'admin/js/vendor/select2/i18n/id.js'
Deleting 'admin/js/vendor/select2/i18n/he.js'
Deleting 'admin/js/vendor/select2/i18n/az.js'
Deleting 'admin/js/vendor/select2/i18n/hr.js'
Deleting 'admin/js/vendor/select2/i18n/sl.js'
Deleting 'admin/js/vendor/select2/i18n/bn.js'
Deleting 'admin/js/vendor/select2/i18n/ps.js'
Deleting 'admin/js/vendor/select2/i18n/pt-BR.js'
Deleting 'admin/js/vendor/select2/i18n/uk.js'
Deleting 'admin/js/vendor/select2/i18n/zh-CN.js'
Deleting 'admin/js/vendor/select2/i18n/bg.js'
Deleting 'admin/js/vendor/select2/i18n/lt.js'
Deleting 'admin/js/vendor/select2/i18n/pl.js'
Deleting 'admin/js/vendor/select2/i18n/es.js'
Deleting 'admin/js/vendor/select2/i18n/nb.js'
Deleting 'admin/js/vendor/select2/i18n/th.js'
Deleting 'admin/js/vendor/select2/i18n/sq.js'
Deleting 'admin/js/vendor/select2/i18n/af.js'
Deleting 'admin/js/vendor/select2/i18n/km.js'
Deleting 'admin/js/vendor/select2/i18n/en.js'
Deleting 'admin/js/vendor/select2/i18n/sr-Cyrl.js'
Deleting 'admin/js/vendor/select2/i18n/cs.js'
Deleting 'admin/js/vendor/select2/i18n/fi.js'
Deleting 'admin/js/vendor/select2/i18n/ms.js'
Deleting 'admin/js/vendor/select2/i18n/fa.js'
Deleting 'admin/js/vendor/select2/i18n/ja.js'
Deleting 'admin/js/vendor/select2/i18n/hu.js'
Deleting 'admin/js/vendor/select2/i18n/sr.js'
Deleting 'admin/js/vendor/select2/i18n/lv.js'
Deleting 'admin/js/vendor/select2/i18n/da.js'
Deleting 'admin/js/vendor/select2/i18n/nl.js'
Deleting 'admin/js/vendor/select2/i18n/ru.js'
Deleting 'admin/js/vendor/jquery/LICENSE.txt'
Deleting 'admin/js/vendor/jquery/jquery.js'
Deleting 'admin/js/vendor/jquery/jquery.min.js'
Deleting 'admin/js/vendor/xregexp/xregexp.min.js'
Deleting 'admin/js/vendor/xregexp/LICENSE.txt'
Deleting 'admin/js/vendor/xregexp/xregexp.js'
Deleting 'admin/js/admin/RelatedObjectLookups.js'
Deleting 'admin/js/admin/DateTimeShortcuts.js'

174 static files copied to '/var/www/static'.
Watching for file changes with StatReloader
Watching for file changes with StatReloader
matchmaker init
matchmaker started
HTTP/2 support enabled
Configuring endpoint tcp:port=3000:interface=0.0.0.0
Listening on TCP address 0.0.0.0:3000
HTTP GET / 200 [0.04, 192.168.0.4:47938]
HTTP GET / 200 [0.04, 192.168.0.4:47938]
HTTP GET /api/user/me/get 302 [0.04, 192.168.0.4:47948]
HTTP GET /api/user/me/get 302 [0.04, 192.168.0.4:47948]
HTTP GET / 302 [0.01, 192.168.0.4:38940]
HTTP GET / 302 [0.01, 192.168.0.4:38940]
HTTP GET /login 200 [0.02, 192.168.0.4:38952]
HTTP GET /login 200 [0.02, 192.168.0.4:38952]
HTTP GET /signup 200 [0.02, 192.168.0.4:42156]
HTTP GET /signup 200 [0.02, 192.168.0.4:42156]
HTTP POST /signup 302 [0.30, 192.168.0.4:42160]
HTTP POST /signup 302 [0.30, 192.168.0.4:42160]
HTTP GET / 200 [0.07, 192.168.0.4:42174]
HTTP GET / 200 [0.07, 192.168.0.4:42174]
HTTP GET / 200 [0.06, 192.168.0.4:42186]
HTTP GET / 200 [0.06, 192.168.0.4:42186]
HTTP GET / 200 [0.03, 192.168.0.4:60944]
HTTP GET / 200 [0.03, 192.168.0.4:60944]
HTTP GET /api/user/me/get 302 [0.01, 192.168.0.4:60950]
HTTP GET /api/user/me/get 302 [0.01, 192.168.0.4:60950]
HTTP GET / 302 [0.02, 192.168.0.4:60358]
HTTP GET / 302 [0.02, 192.168.0.4:60358]
HTTP GET /login 200 [0.02, 192.168.0.4:60364]
HTTP GET /login 200 [0.02, 192.168.0.4:60364]
make: *** [Makefile:14: debug] Interrupt
